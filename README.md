# earthly

## Set args in .zshrc/.bashrc/.whateverrc

```
# Get information from your system administrator
export FORMANCE_DEV_KUBE_TOKEN=<KUBE_TOKEN>
export FORMANCE_DEV_KUBE_API_SERVER_ADDRESS=<SERVER_ADDRESS>
export FORMANCE_DEV_BUILDKITD_ADDRESS=<BUILDKITD_ADDRESS>
export FORMANCE_DEV_TLD=<TLD>
export FORMANCE_DEV_GOPROXY=<GOPROXY>
export FORMANCE_DEV_GHCR_REGISTRY=<REGISTRY>
export FORMANCE_DEV_USER=$USER

export EARTHLY_BUILD_ARGS="KUBE_TOKEN=$FORMANCE_DEV_KUBE_TOKEN"
export EARTHLY_BUILD_ARGS="$EARTHLY_BUILD_ARGS,KUBE_APISERVER=$FORMANCE_DEV_KUBE_API_SERVER_ADDRESS"
export EARTHLY_BUILD_ARGS="$EARTHLY_BUILD_ARGS,user=$FORMANCE_DEV_USER"
export EARTHLY_BUILD_ARGS="$EARTHLY_BUILD_ARGS,tld=$FORMANCE_DEV_TLD"
export EARTHLY_BUILD_ARGS="$EARTHLY_BUILD_ARGS,GOPROXY=$FORMANCE_DEV_GOPROXY"
export EARTHLY_BUILD_ARGS="$EARTHLY_BUILD_ARGS,REPOSITORY=$FORMANCE_DEV_GHCR_REGISTRY"

export EARTHLY_BUILDKIT_HOST=$FORMANCE_DEV_BUILDKITD_ADDRESS
```

## Get config 

```
kubectl --context formance-dev -n vcluster-$FORMANCE_DEV_USER get secrets/vc-$FORMANCE_DEV_USER -o jsonpath='{.data.config}' | base64 -d
```

## Connect to vcluster

```
vcluster connect $FORMANCE_DEV_USER -n vcluster-$FORMANCE_DEV_USER --server=https://kube.$FORMANCE_DEV_USER.$FORMANCE_DEV_TLD
```